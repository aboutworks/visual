import { createStore } from "vuex";
import createPersistedState from "vuex-persistedstate";

export default createStore({
  state: {
    gear: {
      'geara': {
        "gear1": {
          "svg": "gear1",
          "rotate": "rotate-clockwise",
          "x": 1018,
          "y": 399,
          "width": 85,
          "height": 85
        },
        "gear2": {
          "svg": "gear5",
          "rotate": "rotate-clockwise",
          "x": 956,
          "y": 271,
          "width": 60,
          "height": 60
        },
        "gear3": {
          "svg": "gear",
          "rotate": "rotate-counterclockwise",
          "x": 1286,
          "y": 379,
          "width": 130,
          "height": 130
        },
        "gear4": {
          "svg": "gear1",
          "rotate": "rotate-clockwise",
          "x": 996,
          "y": 185,
          "width": 114,
          "height": 114
        },
        "gear5": {
          "svg": "gear3",
          "rotate": "rotate-clockwise",
          "x": 1077,
          "y": 268,
          "width": 128,
          "height": 128
        },
        "gear6": {
          "svg": "gear2",
          "rotate": "rotate-clockwise",
          "x": 193,
          "y": 168,
          "width": 180,
          "height": 180
        },
        "gear7": {
          "svg": "gear2",
          "rotate": "rotate-clockwise",
          "x": 1185,
          "y": 379,
          "width": 44,
          "height": 44
        },
        "gear8": {
          "svg": "gear",
          "rotate": "rotate-counterclockwise",
          "x": 529,
          "y": 473,
          "width": 60,
          "height": 60
        },
        "gear9": {
          "svg": "gear3",
          "rotate": "rotate-counterclockwise",
          "x": 938,
          "y": 197,
          "width": 59,
          "height": 59
        },
        "gear10": {
          "svg": "gear3",
          "rotate": "rotate-counterclockwise",
          "x": 1228,
          "y": 331,
          "width": 84,
          "height": 84
        },
        "gear11": {
          "svg": "gear1",
          "rotate": "rotate-clockwise",
          "x": 588,
          "y": 422,
          "width": 184,
          "height": 184
        },
        "gear12": {
          "svg": "gear2",
          "rotate": "rotate-counterclockwise",
          "x": 1029,
          "y": 303,
          "width": 47,
          "height": 47
        },
        "gear13": {
          "svg": "gear1",
          "rotate": "rotate-clockwise",
          "x": 384,
          "y": 151,
          "width": 173,
          "height": 173
        },
        "gear14": {
          "svg": "gear3",
          "rotate": "rotate-clockwise",
          "x": 1105,
          "y": 422,
          "width": 136,
          "height": 136
        },
        "gear15": {
          "svg": "gear3",
          "rotate": "rotate-counterclockwise",
          "x": 356,
          "y": 288,
          "width": 60,
          "height": 60
        },
        "gear16": {
          "svg": "gear",
          "rotate": "rotate-clockwise",
          "x": 1209,
          "y": 256,
          "width": 70,
          "height": 70
        },
        "gear17": {
          "svg": "gear3",
          "rotate": "rotate-clockwise",
          "x": 778,
          "y": 400,
          "width": 162,
          "height": 162
        },
        "gear18": {
          "svg": "gear3",
          "rotate": "rotate-clockwise",
          "x": 1132,
          "y": 162,
          "width": 112,
          "height": 112
        },
        "gear19": {
          "svg": "gear",
          "rotate": "rotate-counterclockwise",
          "x": 917,
          "y": 386,
          "width": 50,
          "height": 50
        },
        "gear20": {
          "svg": "gear5",
          "rotate": "rotate-clockwise",
          "x": 721,
          "y": 344,
          "width": 93,
          "height": 93
        },
        "gear21": {
          "svg": "gear5",
          "rotate": "rotate-clockwise",
          "x": 553,
          "y": 172,
          "width": 112,
          "height": 112
        },
        "gear22": {
          "svg": "gear2",
          "rotate": "rotate-counterclockwise",
          "x": 829,
          "y": 134,
          "width": 97,
          "height": 97
        },
        "gear23": {
          "svg": "gear3",
          "rotate": "rotate-counterclockwise",
          "x": 604,
          "y": 330,
          "width": 96,
          "height": 96
        },
        "gear24": {
          "svg": "gear",
          "rotate": "rotate-counterclockwise",
          "x": 711,
          "y": 98,
          "width": 120,
          "height": 120
        },
        "gear25": {
          "svg": "gear2",
          "rotate": "rotate-clockwise",
          "x": 522,
          "y": 399,
          "width": 74,
          "height": 74
        },
        "gear26": {
          "svg": "gear",
          "rotate": "rotate-clockwise",
          "x": 800,
          "y": 233,
          "width": 159,
          "height": 159
        },
        "gear27": {
          "svg": "gear3",
          "rotate": "rotate-counterclockwise",
          "x": 925,
          "y": 505,
          "width": 62,
          "height": 62
        },
        "gear28": {
          "svg": "gear2",
          "rotate": "rotate-counterclockwise",
          "x": 1271,
          "y": 165,
          "width": 145,
          "height": 145
        },
        "gear29": {
          "svg": "gear",
          "rotate": "rotate-clockwise",
          "x": 374,
          "y": 322,
          "width": 157,
          "height": 157
        },
        "gear30": {
          "svg": "gear3",
          "rotate": "rotate-clockwise",
          "x": 656,
          "y": 208,
          "width": 145,
          "height": 145
        },
        "gear31": {
          "svg": "gear1",
          "rotate": "rotate-counterclockwise",
          "x": 926,
          "y": 165,
          "width": 36,
          "height": 36
        },
        "gear32": {
          "svg": "gear3",
          "rotate": "rotate-clockwise",
          "x": 958,
          "y": 329,
          "width": 88,
          "height": 88
        },
        "gear33": {
          "svg": "gear2",
          "rotate": "rotate-counterclockwise",
          "x": 1381,
          "y": 282,
          "width": 141,
          "height": 141
        },
        "gear34": {
          "svg": "gear1",
          "rotate": "rotate-clockwise",
          "x": 520,
          "y": 301,
          "width": 88,
          "height": 88
        }
      },
      "gearb" : {
        "gear1": {
          "svg": "gear2",
          "rotate": "rotate-counterclockwise",
          "x": 1022,
          "y": 410,
          "width": 177,
          "height": 177
        },
        "gear2": {
          "svg": "gear2",
          "rotate": "rotate-counterclockwise",
          "x": 674,
          "y": 382,
          "width": 236,
          "height": 236
        },
        "gear3": {
          "svg": "gear3",
          "rotate": "rotate-clockwise",
          "x": 411,
          "y": 116,
          "width": 132,
          "height": 132
        },
        "gear4": {
          "svg": "gear",
          "rotate": "rotate-clockwise",
          "x": 813,
          "y": 219,
          "width": 80,
          "height": 80
        },
        "gear5": {
          "svg": "gear1",
          "rotate": "rotate-clockwise",
          "x": 829,
          "y": 78,
          "width": 149,
          "height": 149
        },
        "gear6": {
          "svg": "gear2",
          "rotate": "rotate-clockwise",
          "x": 1038,
          "y": 106,
          "width": 131,
          "height": 131
        },
        "gear7": {
          "svg": "gear",
          "rotate": "rotate-counterclockwise",
          "x": 0,
          "y": 0,
          "width": 11,
          "height": 11
        },
        "gear8": {
          "svg": "gear3",
          "rotate": "rotate-counterclockwise",
          "x": 371,
          "y": 235,
          "width": 118,
          "height": 118
        },
        "gear9": {
          "svg": "gear5",
          "rotate": "rotate-counterclockwise",
          "x": 436,
          "y": 448,
          "width": 56,
          "height": 56
        },
        "gear10": {
          "svg": "gear3",
          "rotate": "rotate-clockwise",
          "x": 581,
          "y": 94,
          "width": 94,
          "height": 94
        },
        "gear11": {
          "svg": "gear3",
          "rotate": "rotate-clockwise",
          "x": 514,
          "y": 194,
          "width": 228,
          "height": 228
        },
        "gear12": {
          "svg": "gear2",
          "rotate": "rotate-clockwise",
          "x": 391,
          "y": 409,
          "width": 46,
          "height": 46
        },
        "gear13": {
          "svg": "gear2",
          "rotate": "rotate-counterclockwise",
          "x": 878,
          "y": 219,
          "width": 224,
          "height": 224
        },
        "gear14": {
          "svg": "gear1",
          "rotate": "rotate-counterclockwise",
          "x": 615,
          "y": 423,
          "width": 66,
          "height": 66
        },
        "gear15": {
          "svg": "gear3",
          "rotate": "rotate-counterclockwise",
          "x": 1174,
          "y": 306,
          "width": 195,
          "height": 195
        },
        "gear16": {
          "svg": "gear5",
          "rotate": "rotate-clockwise",
          "x": 0,
          "y": 0,
          "width": 12,
          "height": 12
        },
        "gear17": {
          "svg": "gear",
          "rotate": "rotate-clockwise",
          "x": 915,
          "y": 468,
          "width": 77,
          "height": 77
        },
        "gear18": {
          "svg": "gear2",
          "rotate": "rotate-counterclockwise",
          "x": 703,
          "y": 83,
          "width": 96,
          "height": 96
        },
        "gear19": {
          "svg": "gear3",
          "rotate": "rotate-counterclockwise",
          "x": 1097,
          "y": 227,
          "width": 90,
          "height": 90
        },
        "gear20": {
          "svg": "gear3",
          "rotate": "rotate-clockwise",
          "x": 473,
          "y": 359,
          "width": 35,
          "height": 35
        },
        "gear21": {
          "svg": "gear",
          "rotate": "rotate-counterclockwise",
          "x": 739,
          "y": 194,
          "width": 60,
          "height": 60
        },
        "gear22": {
          "svg": "gear3",
          "rotate": "rotate-counterclockwise",
          "x": 1303,
          "y": 490,
          "width": 105,
          "height": 105
        },
        "gear23": {
          "svg": "gear2",
          "rotate": "rotate-counterclockwise",
          "x": 801,
          "y": 311,
          "width": 80,
          "height": 80
        },
        "gear24": {
          "svg": "gear3",
          "rotate": "rotate-clockwise",
          "x": 1203,
          "y": 56,
          "width": 226,
          "height": 226
        },
        "gear25": {
          "svg": "gear3",
          "rotate": "rotate-counterclockwise",
          "x": 275,
          "y": 266,
          "width": 74,
          "height": 74
        },
        "gear26": {
          "svg": "gear5",
          "rotate": "rotate-clockwise",
          "x": 253,
          "y": 331,
          "width": 208,
          "height": 208
        },
        "gear27": {
          "svg": "gear1",
          "rotate": "rotate-counterclockwise",
          "x": 483,
          "y": 402,
          "width": 95,
          "height": 95
        },
        "gear28": {
          "svg": "gear",
          "rotate": "rotate-clockwise",
          "x": 1374,
          "y": 267,
          "width": 229,
          "height": 229
        }
      } 
    }
  },
  mutations: {
    initializeGearObj(state, gearObjName) {
      if (!state.gear[gearObjName]) {
        state.gear[gearObjName] = {};
      }
    },
    addGear(state, { gearObjName, gear}) {
        // 检查 gearObjName 是否存在
        if (state.gear[gearObjName]) {
          const { name: gearName, size } = gear; // 从 gear 对象中提取 gearName 和 size
          // 确保 gearObjName 对象中存在 gearName，并将 size 添加到 gearName 对象中
          state.gear[gearObjName][gearName] = { ...state.gear[gearObjName][gearName], ...size };
        }
        // 如果 gearObjName 不存在，不做任何操作
    },
    setGearPosition(state, { gearObjName, gearName, x, y }) {
      if (!state.gear[gearObjName][gearName]) {
        state.gear[gearObjName][gearName] = {};
      }
      state.gear[gearObjName][gearName].x = x;
      state.gear[gearObjName][gearName].y = y;
    },
    setGearSize(state, {gearObjName, gearName, width, height }) {
      if (!state.gear[gearObjName][gearName]) {
        state.gear[gearObjName][gearName] = {};
      }
      state.gear[gearObjName][gearName].width = width;
      state.gear[gearObjName][gearName].height = height;
    },
    // 更新指定键的值
    updateStateValue(state, { key, value }) {
      // 确保 key 存在于 state 中
      if (state[key]) {
        // 如果 value 是对象，合并它
        if (typeof value === "object" && !Array.isArray(value)) {
          state[key] = { ...state[key], ...value };
        } else {
          // 否则直接赋值
          state[key] = value;
        }
      } else {
        // 如果 key 不存在于 state 中，创建新的 key
        state[key] = value;
      }
    },
  },
  plugins: [createPersistedState()],
});
